<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>ぬるぽ書庫</title>
    <meta name="description" content="ぬるぽ書庫">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/solid.css"
        integrity="sha384-yo370P8tRI3EbMVcDU+ziwsS/s62yNv3tgdMqDSsRSILohhnOrDNl142Df8wuHA+" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/fontawesome.css"
        integrity="sha384-ijEtygNrZDKunAWYDdV3wAZWvTHSrGhdUfImfngIba35nhQ03lSNgfTJAKaGFjk2" crossorigin="anonymous">
</head>

<body class="bg-white">

    <div class="jumbotron d-flex align-items-center bg-white">
        <div class="container">
            <div class="row justify-content-center">
                <h1>ぬるぽ書庫</h1>
            </div>
            <div class="row justify-content-center pt-2">
                <form method="post" class="form-inline">
                    <input id="dlkey" name="dlkey" class="form-control" placeholder="Enter your download key here">
                    <button id="submitBtn" type="submit" class="btn btn-primary">
                        <i class="fas fa-file-download"></i>
                    </button>
                </form>
            </div>
            <div class="row pt-4">
                <span id="copyright" class="col-12 text-center text-muted font-weight-bold"></span>
            </div>
        </div>
    </div>

    <script>
        let getCopyRight = (startYear, name) => {
            date = new Date();
            var y = date.getFullYear();
            if (startYear === y) return ('&copy; ' + startYear + ' ' + name);
            return ('&copy; ' + startYear + '&ndash;' + y + ' ' + name);
        };

        const spanCR = document.querySelector('#copyright');
        const inputKey = document.querySelector('#dlkey');
        const btnSubmit = document.querySelector('#submitBtn');

        spanCR.innerHTML = getCopyRight(2020, "ぬるぽ帝国");

        const urlParams = new URLSearchParams(window.location.search);
        const paramKey = urlParams.get('key');
        if (paramKey) inputKey.value = paramKey;

        let checkInput = () => {
            if (inputKey.value === '') btnSubmit.disabled = true;
            else btnSubmit.disabled = false;
        }
        inputKey.oninput = checkInput;
        checkInput();
    </script>

</body>

</html>